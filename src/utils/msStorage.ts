import { timeType, calcMilliseconds } from './commonHelp'

// 定义可选参类型
interface IExtraOptions {
  expires?: number
  unit?: timeType
  reset?: boolean
  // startTime?: number
  // value?: any
  //[name: string]: any;
}

const Extra_Options: IExtraOptions = {
  expires: 0, // 默认永久
  unit: 's', // 默认秒
  reset: false //是否重置过期时间
  // value: '',
  // startTime: 0
}

export default class MSStrorage {
  storage: Storage
  private static _instance: MSStrorage
  // 计算时间
  millisecond: number = 0
  constructor() {
    this.storage = window.localStorage
  }
  get _millisecond(): number {
    return this.millisecond
  }

  set _millisecond(num: number) {
    this.millisecond = num
  }

  static get instance() {
    if (!this._instance) {
      this._instance = new MSStrorage()
    }
    return this._instance
  }

  //设置storage
  private _set(key: string, value: any) {
    this.storage.setItem(key, JSON.stringify(value))
  }

  getItem(key: string, isMerge: boolean = false) {
    try {
      if (!key) return null
      const localItem = this.storage.getItem(key!)
      if (localItem) {
        const localStore: any = JSON.parse(localItem)
        const time = Date.now()
        const _expires = localStore.expires || 0
        //如果是永久，则直接返回值
        if (_expires === 0) return isMerge ? localStore : localStore.value
        // 判断是否过期,过期则删除
        if (localStore.startTime && time - localStore.startTime >= _expires) {
          this.removeItem(key)
          return null
        }
        return isMerge ? localStore : localStore.value
      } else {
        return null
      }
    } catch (error) {
      return null
    }
  }

  setItem(key: string, value: any, options?: IExtraOptions): void {
    const hasStore: any = this.getItem(key, true)
    const extra = { ...Extra_Options, ...options } //合并对象，防止初始值不存在
    if (hasStore) {
      // 存在，是否要重新设置值
      hasStore.value = value
      //设置过期时间，如5分钟，{ expires: 5, unit: 'm' }
      hasStore.expires = calcMilliseconds(
        extra.unit || hasStore.unit,
        extra.expires || hasStore.expires
      )
      if (extra.reset) {
        // 存在且重新设置时间
        hasStore.startTime = Date.now()
      }
      this._set(key, hasStore)
    } else {
      const newStore = {
        value,
        startTime: Date.now(),
        unit: extra.unit,
        expires: calcMilliseconds(extra.unit, extra.expires)
      }
      this._set(key, newStore)
    }
  }
  removeItem(key: string): void {
    key && this.storage.removeItem(key)
  }
  clear(): void {
    this.storage.clear()
  }
}
const str =
  '<el-form v-form=\'{formItemAlign:"right",inputsDisplay:"block",roInputDisplayMode:"text"}\'> <ht-global-query :queryJson=\'[{"entType":"main","desc":"","alias":"Currency","name":"币种","conditionfield":[{"field":"BIZBM","comment":"币种编码","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":"data.OrderChange.Currid"},{"field":"BIZMC","comment":"币种名称","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"DUIRMBHL","comment":"外币兑人民币汇率","condition":"EQ","dbType":"number","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"DUIUSDHL","comment":"美金兑外币汇率","condition":"EQ","dbType":"number","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"LILV","comment":"利率","condition":"EQ","dbType":"number","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""}],"resultfield":[{"field":"BIZBM","comment":"币种编码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.Currid"},{"field":"BIZMC","comment":"币种名称","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"DUIRMBHL","comment":"外币兑人民币汇率","idKey":"0","AggFuncOp":"","columnType":"number","fieldPath":"data.OrderChange.ExchangeRate"},{"field":"DUIUSDHL","comment":"美金兑外币汇率","idKey":"0","AggFuncOp":"","columnType":"number","fieldPath":""},{"field":"SHUNXU","comment":"顺序","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"LILV","comment":"利率","idKey":"0","AggFuncOp":"","columnType":"number","fieldPath":""}],"dsType":"dataSource","triggerTime":"change,load","triggerField":"data.OrderChange.Currid","noValuabletrigger":false},{"entType":"sub","desc":"","alias":"cxSAPcgddPO","name":"查询SAP采购订单PO","conditionfield":[{"field":"EBELN","comment":"采购凭证号 ","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"","fieldPath":"data.OrderChange.sub_IssluggishDetail.EBELN"},{"field":"EBELP","comment":"采购凭证的项目编号 ","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"","fieldPath":"data.OrderChange.sub_IssluggishDetail.EBELP"}],"resultfield":[{"field":"EBELN","comment":"采购凭证号 ","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"EBELP","comment":"采购凭证的项目编号 ","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"LIFNR","comment":"供应商或债权人的帐号","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"LOEKZ","comment":"资产类别作删除标记 ","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"ELIKZ","comment":"交货已完成标识","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"MATNR","comment":"物料号 ","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.MaterialCode"},{"field":"WERKS","comment":"工厂","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.Werks"},{"field":"LGORT","comment":"库存地点","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"MENGE","comment":"数量","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.OrdersNo"},{"field":"MEINS","comment":"基本计量单位","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.meins"},{"field":"WEMNG","comment":"收货数量","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.DeliveryNo"},{"field":"EMATN","comment":"按照制造商零件编号的物料编号 ","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.MATNR"},{"field":"MAKTX","comment":"物料描述（短文本） ","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.MaterialDesc"},{"field":"WAERS","comment":"货币码 ","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"NETPR","comment":"价格","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.sub_IssluggishDetail.Price"}],"dsType":"restful","triggerTime":"change","noValuabletrigger":false,"triggerField":"data.OrderChange.sub_IssluggishDetail.EBELN","noValuableField":"","subPath":"OrderChange.sub_IssluggishDetail"},{"entType":"main","desc":"SRM供应商银行信息","alias":"SRMgysyxxxcx","name":"SRM供应商银行信息","conditionfield":[{"field":"toElsAccount","comment":"toElsAccount","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":"data.OrderChange.Srmid"}],"resultfield":[{"field":"toElsAccount","comment":"toElsAccount","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"bankCity","comment":"bankCity","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.Bankcity"},{"field":"bankCode","comment":"bankCode","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.Ihhcode"},{"field":"fbk10","comment":"fbk10","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.Bankname"},{"field":"fbk13","comment":"fbk13","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.Bankowner"},{"field":"fbk14","comment":"fbk14","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.Bankaccount"},{"field":"bankGjArea","comment":"bankGjArea","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"bankBranchName","comment":"bankBranchName","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.Openingbank"},{"field":"fbk11","comment":"国家编码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.country"}],"dsType":"dataSource","triggerTime":"change,load","triggerField":"data.OrderChange.Srmid","noValuabletrigger":false},{"entType":"main","desc":"","alias":"CostCenter","name":"成本中心","conditionfield":[{"field":"BIANMA","comment":"编码（成本中心）","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"FEIYBMBM","comment":"费用部门编码","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"FEIYBMMC","comment":"费用部门名称","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"COSTCTRCAT","comment":"CostCtrCat","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"HUOB","comment":"货币","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"GONGSDM","comment":"公司代码","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"CENGCJGFW","comment":"层次结构范围","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"GONGNFW","comment":"功能范围","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"LIRZX","comment":"利润中心","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"ZHUANGT","comment":"状态","condition":"EQ","dbType":"number","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"SFGC","comment":"是否工厂","condition":"EQ","dbType":"number","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"SJBMBM","comment":"上级部门编码","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"COST","comment":"COST","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"BUMCODE","comment":"费用部门编码（新）","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""}],"resultfield":[{"field":"BIANMA","comment":"编码（成本中心）","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"FEIYBMBM","comment":"费用部门编码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"FEIYBMMC","comment":"费用部门名称","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"COSTCTRCAT","comment":"CostCtrCat","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"HUOB","comment":"货币","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"GONGSDM","comment":"公司代码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"CENGCJGFW","comment":"层次结构范围","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"GONGNFW","comment":"功能范围","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"LIRZX","comment":"利润中心","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"ZHUANGT","comment":"状态","idKey":"0","AggFuncOp":"","columnType":"number","fieldPath":""},{"field":"SFGC","comment":"是否工厂","idKey":"0","AggFuncOp":"","columnType":"number","fieldPath":""},{"field":"SJBMBM","comment":"上级部门编码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"COST","comment":"COST","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"BUMCODE","comment":"费用部门编码（新）","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""}],"dsType":"dataSource"},{"entType":"main","desc":"","alias":"SealInquiry","name":"印章查询","conditionfield":[{"field":"WORKCODE","comment":"印章管理员","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":"data.OrderChange.Standard"},{"field":"BIANM","comment":"公司代码","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":"data.OrderChange.compid"},{"field":"YINZLX","comment":"印章类型","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"YINZHANGMC","comment":"印章名称","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":"data.OrderChange.SealAdmin"},{"field":"LASTNAME","comment":"印章管理员","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":"data.OrderChange.Name"}],"resultfield":[{"field":"WORKCODE","comment":"印章管理员","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"BIANM","comment":"公司代码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"YINZLX","comment":"印章类型","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"YINZHANGMC","comment":"印章名称","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"LASTNAME","comment":"LASTNAME","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"LASTNAME","comment":"姓名","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""}],"dsType":"dataSource"},{"entType":"main","desc":"","alias":"SRMcgddgysss","name":"SRM采购订单供应商搜索","conditionfield":[{"field":"toElsAccount","comment":"供应商SRM编码","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"vender","comment":"供应商SAP编码","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":"data.OrderChange.CSid"},{"field":"supplierName","comment":"供应商名称","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""},{"field":"SRMEmpNo","comment":"SRMEmpNo","condition":"EQ","dbType":"varchar","defaultType":"1","defaultValue":"","controllerType":"1","emptyValue":"无","fieldPath":""}],"resultfield":[{"field":"toElsAccount","comment":"供应商SRM编码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"vender","comment":"供应商SAP编码","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.CSid"},{"field":"supplierName","comment":"供应商名称","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":""},{"field":"SRMEmpNo","comment":"SRMEmpNo","idKey":"0","AggFuncOp":"","columnType":"varchar","fieldPath":"data.OrderChange.SRM"}],"dsType":"dataSource","triggerTime":"load,change","noValuabletrigger":false,"triggerField":"data.OrderChange.CSid"}]\'/> <ht-global-validate :data="data" :verificationJson="\'W3sibmFtZSI6IuWIhuaRiuavlOS-i-i2hei_hzEwMCUiLCJkZXNjIjoiIiwidGlwcyI6IuWIhuaRiuavlOS-i-S4jeetieS6jjEwMCXvvIzor7fmo4Dmn6XlkI7mj5DkuqTvvIEiLCJmb3JtdWxhc0RpeUpzIjoiJEZvcm11bGFzLklGKGRhdGEuT3JkZXJDaGFuZ2UuUmF0aW89PTEwMCwkRm9ybXVsYXMuVFJVRSh0cnVlKSwkRm9ybXVsYXMuRkFMU0UoZmFsc2UpKSJ9XQ\'"/> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="16" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Title" v-if="permission.fields.OrderChange.Title!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">标题</span> </template> <ht-input v-model="data.OrderChange.Title" name="标题" model-name="data.OrderChange.Title" :permission="permission.fields.OrderChange.Title" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.ProcessNo" v-if="permission.fields.OrderChange.ProcessNo!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">流程编号</span> </template> <ht-input v-model="data.OrderChange.ProcessNo" name="流程编号" model-name="data.OrderChange.ProcessNo" :permission="permission.fields.OrderChange.ProcessNo" :config-attributes="{bindIdentityAlias:\'gysbglclsh\'}" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.User" v-if="permission.fields.OrderChange.User!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">申请人</span> </template> <ht-user-selector-input v-model="data.OrderChange.User" name="申请人" appendToBody model-name="data.OrderChange.User" :permission="permission.fields.OrderChange.User" :config="{\'account\':\'data.OrderChange.Userid\'}" select-current style="width: 100%;"> </ht-user-selector-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Dept" v-if="permission.fields.OrderChange.Dept!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">申请部门</span> </template> <ht-org-selector-input v-model="data.OrderChange.Dept" name="申请部门" appendToBody model-name="data.OrderChange.Dept" :permission="permission.fields.OrderChange.Dept" :config="{\'code\':\'data.OrderChange.Deptid\',\'name\':\'data.\'}" select-current single style="width: 100%;"> </ht-org-selector-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Billdate" v-if="permission.fields.OrderChange.Billdate!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">申请日期</span> </template> <ht-date v-model="data.OrderChange.Billdate" name="申请日期" model-name="data.OrderChange.Billdate" is-server-date :permission="permission.fields.OrderChange.Billdate" show-date format="yyyy-MM-dd" value-format="yyyy-MM-dd" style="width: 100%;"> </ht-date> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Userid" v-if="permission.fields.OrderChange.Userid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">申请人编码</span> </template> <ht-input v-model="data.OrderChange.Userid" name="申请人编码" model-name="data.OrderChange.Userid" :permission="permission.fields.OrderChange.Userid" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Deptid" v-if="permission.fields.OrderChange.Deptid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">申请部门编码</span> </template> <ht-input v-model="data.OrderChange.Deptid" name="申请部门编码" model-name="data.OrderChange.Deptid" :permission="permission.fields.OrderChange.Deptid" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.phone_number" v-if="permission.fields.OrderChange.phone_number!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">申请人电话</span> </template> <ht-input v-model="data.OrderChange.phone_number" name="申请人电话" model-name="data.OrderChange.phone_number" :permission="permission.fields.OrderChange.phone_number" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.CS" v-if="permission.fields.OrderChange.CS!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">供应商名称</span> </template> <ht-custom-dialog v-model="data.OrderChange.CS" model-name="data.OrderChange.CS" name="供应商名称" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[],"mappingConf":[{"from":"供应商SAP编码","target":["OrderChange.CSid"],"targetSub":["OrderChange.CSid"]},{"from":"供应商名称","target":["OrderChange.CS"],"targetSub":["OrderChange.CS"]},{"from":"供应商SRM编码","target":["OrderChange.Srmid"],"targetSub":["OrderChange.Srmid"]}],"custQueryJson":[],"alias":"SRMcgddgysss","type":"custDialog"},"resultField":[{"field":"供应商SRM编码","comment":"供应商SRM编码","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"供应商SAP编码","comment":"供应商SAP编码","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"供应商名称","comment":"供应商名称","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"Email","comment":"Email","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"SRMEmpNo","comment":"SRMEmpNo","idKey":"0","AggFuncOp":"","columnType":"varchar"}],"allowInput":false,"valueBind":"","labelBind":""}\' placeholder="" :permission="permission.fields.OrderChange.CS" style="width: 100%" atter="data.OrderChange.CS" :validate="\'frontJSValidate:dmFyIGZsYWcgPSB7fTsKaWYoZGF0YS5PcmRlckNoYW5nZS5DUz09JycpIHsKICAgICAgIGRhdGEuT3JkZXJDaGFuZ2UuSXNzbHVnZ2lzaC5mb3JFYWNoKChpdGVtLGluZGV4KT0+ewogICAgICAgICAgZmxhZyA9IHt2YWxpZDpmYWxzZSxkYXRhOnttZXNzYWdlOifkvpvlupTllYblkI3np7DkuI3og73kuLrnqbrvvIEnfX07ICAKICAgICAgICAgICAgCiAgICAgICAgfSkKfWVsc2V7CiAgIGZsYWc9e3ZhbGlkOnRydWV9Owp9CgogcmV0dXJuICBmbGFnOw==\'" :style=\'{}\'> <span slot="labeldesc">供应商名称 OrderChange </span> </ht-custom-dialog> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Business" v-if="permission.fields.OrderChange.Business!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">采购商务</span> </template> <ht-user-selector-input v-model="data.OrderChange.Business" name="采购商务" appendToBody model-name="data.OrderChange.Business" :permission="permission.fields.OrderChange.Business" :config="{\'account\':\'data.OrderChange.Businessid\'}" style="width: 100%;"> </ht-user-selector-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Procurement" v-if="permission.fields.OrderChange.Procurement!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">工厂采购</span> </template> <ht-user-selector-input v-model="data.OrderChange.Procurement" name="工厂采购" appendToBody model-name="data.OrderChange.Procurement" :permission="permission.fields.OrderChange.Procurement" :config="{\'id\':\'data.\',\'account\':\'data.OrderChange.Procurementid\'}" style="width: 100%;"> </ht-user-selector-input> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="6" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.CSid" v-if="permission.fields.OrderChange.CSid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">供应商编码</span> </template> <ht-input v-model="data.OrderChange.CSid" name="供应商编码" model-name="data.OrderChange.CSid" :permission="permission.fields.OrderChange.CSid" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" field-path="OrderChange.Srmid" v-if="permission.fields.OrderChange.Srmid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">SRM供应商编码</span> </template> <ht-input v-model="data.OrderChange.Srmid" name="SRM供应商编码" model-name="data.OrderChange.Srmid" :permission="permission.fields.OrderChange.Srmid" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.SRMcode" v-if="permission.fields.OrderChange.SRMcode!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">SRM账户编码</span> </template> <ht-input v-model="data.OrderChange.SRMcode" name="SRM账户编码" model-name="data.OrderChange.SRMcode" :permission="permission.fields.OrderChange.SRMcode" v-formula="{value:\'8601971001\',bindPath: \'data.OrderChange.SRMcode\' }" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Standard" v-if="permission.fields.OrderChange.Standard!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">标准信息</span> </template> <ht-input v-model="data.OrderChange.Standard" name="标准信息" model-name="data.OrderChange.Standard" :permission="permission.fields.OrderChange.Standard" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="6" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.ProcurementDept" v-if="permission.fields.OrderChange.ProcurementDept!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">工厂采购部门</span> </template> <ht-input v-model="data.OrderChange.ProcurementDept" name="工厂采购部门" model-name="data.OrderChange.ProcurementDept" :permission="permission.fields.OrderChange.ProcurementDept" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.SRM" v-if="permission.fields.OrderChange.SRM!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">SRM账号</span> </template> <ht-input v-model="data.OrderChange.SRM" name="SRM账号" model-name="data.OrderChange.SRM" :permission="permission.fields.OrderChange.SRM" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Procurementid" v-if="permission.fields.OrderChange.Procurementid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">工厂采购编码</span> </template> <ht-input v-model="data.OrderChange.Procurementid" name="工厂采购编码" model-name="data.OrderChange.Procurementid" :permission="permission.fields.OrderChange.Procurementid" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.sum_TicketMoney" v-if="permission.fields.OrderChange.sum_TicketMoney!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">折扣金额汇总</span> </template> <ht-input v-model="data.OrderChange.sum_TicketMoney" name="折扣金额汇总" model-name="data.OrderChange.sum_TicketMoney" :permission="permission.fields.OrderChange.sum_TicketMoney" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="6" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.BusinessDept" v-if="permission.fields.OrderChange.BusinessDept!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">采购商务部门</span> </template> <ht-input v-model="data.OrderChange.BusinessDept" name="采购商务部门" model-name="data.OrderChange.BusinessDept" :permission="permission.fields.OrderChange.BusinessDept" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Email" v-if="permission.fields.OrderChange.Email!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">联系邮箱</span> </template> <ht-input v-model="data.OrderChange.Email" name="联系邮箱" model-name="data.OrderChange.Email" :permission="permission.fields.OrderChange.Email" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Businessid" v-if="permission.fields.OrderChange.Businessid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">采购商务编码</span> </template> <ht-input v-model="data.OrderChange.Businessid" name="采购商务编码" model-name="data.OrderChange.Businessid" :permission="permission.fields.OrderChange.Businessid" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Nameid" v-if="permission.fields.OrderChange.Nameid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">计划管理员编码</span> </template> <ht-input v-model="data.OrderChange.Nameid" name="计划管理员编码" model-name="data.OrderChange.Nameid" :permission="permission.fields.OrderChange.Nameid" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="6" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.ExpenseOwner" v-if="permission.fields.OrderChange.ExpenseOwner!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">费用部门总监</span> </template> <ht-user-selector-input v-model="data.OrderChange.ExpenseOwner" name="费用部门总监" appendToBody model-name="data.OrderChange.ExpenseOwner" :permission="permission.fields.OrderChange.ExpenseOwner" :config="{\'account\':\'data.OrderChange.ExpenseOwnerid\'}" style="width: 100%;"> </ht-user-selector-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Bankarea" v-if="permission.fields.OrderChange.Bankarea!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">国家地区二字码</span> </template> <ht-input v-model="data.OrderChange.Bankarea" name="国家地区二字码" model-name="data.OrderChange.Bankarea" :permission="permission.fields.OrderChange.Bankarea" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" field-path="OrderChange.compid" v-if="permission.fields.OrderChange.compid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">付款公司</span> </template> <ht-input v-model="data.OrderChange.compid" name="付款公司" model-name="data.OrderChange.compid" :permission="permission.fields.OrderChange.compid" style="width: 100%;"> </ht-input> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.ExpenseOwnerid" v-if="permission.fields.OrderChange.ExpenseOwnerid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">费用部门总监编码</span> </template> <ht-input v-model="data.OrderChange.ExpenseOwnerid" name="费用部门总监编码" model-name="data.OrderChange.ExpenseOwnerid" :permission="permission.fields.OrderChange.ExpenseOwnerid" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Issluggish" v-if="permission.fields.OrderChange.Issluggish!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">有无呆滞费用</span> </template> <ht-select v-model="data.OrderChange.Issluggish" name="有无呆滞费用" model-name="data.OrderChange.Issluggish" :ganged="{\'alias\':\'\',\'valueBind\':\'\',\'noInit\':\'\',\'labelBind\':\'\',\'PId\':\'\',\'mappingConf\':[],\'resultfield\':[],\'bind\':{}}" :linkage="[{value:\'Y\',effect:[{target: \'permission.fields.OrderChange.Name\', type: \'=\',value: \'r\',boType: \'main\'}]},{value:\'N\',effect:[{target: \'permission.fields.OrderChange.Name\', type: \'=\',value: \'b\',boType: \'main\'}]}]" :multiple=\'false\' :filterable=\'false\' :allowCreate=\'false\' :permission="permission.fields.OrderChange.Issluggish" :limit-count="99999" :selectlist=\'[{"key":"Y","value":"是"},{"key":"N","value":"否"},{"key":"F","value":"其他"}]\' style="width: 100%;"> </ht-select> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Comp" v-if="permission.fields.OrderChange.Comp!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">下单主体</span> </template> <ht-custom-dialog v-model="data.OrderChange.Comp" model-name="data.OrderChange.Comp" name="下单主体" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[],"mappingConf":[{"from":"公司名称","target":["OrderChange.Comp"],"targetSub":["OrderChange.Comp"]},{"from":"公司代码","target":["OrderChange.compid"],"targetSub":["OrderChange.compid"]}],"custQueryJson":[],"alias":"company","type":"custDialog"},"resultField":[{"field":"公司名称","comment":"公司名称","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"公司代码","comment":"公司代码","idKey":"0","AggFuncOp":"","columnType":"varchar"}],"allowInput":false}\' placeholder="" :permission="permission.fields.OrderChange.Comp" style="width: 100%" atter="data.OrderChange.Comp" :style=\'{}\'> <span slot="labeldesc">下单主体 OrderChange </span> </ht-custom-dialog> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Name" v-if="permission.fields.OrderChange.Name!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">计划管理员</span> </template> <ht-user-selector-input v-model="data.OrderChange.Name" name="计划管理员" appendToBody model-name="data.OrderChange.Name" :permission="permission.fields.OrderChange.Name" :config="{\'account\':\'data.OrderChange.Nameid\'}" style="width: 100%;"> </ht-user-selector-input> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="24" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Memo" v-if="permission.fields.OrderChange.Memo!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">业务说明</span> </template> <ht-input v-model="data.OrderChange.Memo" type="textarea" name="业务说明" model-name="data.OrderChange.Memo" :permission="permission.fields.OrderChange.Memo" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> <div v-if="!permission.table.IssluggishDetail.hidden" class="form-table__container"> <div sunBos="" class="form-table-header"> <div class="flex" style="justify-content: space-between;"> <span class="sub-table__title" style="color:#333333">呆滞明细</span> <div class="printHide table-header-btn__wrap" style="display:flex"> <template> <el-dialog :title="$t(\'eip.table.customColumns\')" :visible.sync="columnDialogVisiable" append-to-body width="650px"> <el-table v-if="currentFreeze" style="width: 100%" height="300" :data="freeze[currentFreeze][\'list\']"> <el-table-column :label="$t(\'eip.table.showHide\')" align="center"> <template slot-scope="{ row }"> <el-checkbox v-model="row.show"/> </template> </el-table-column> <el-table-column :label="$t(\'eip.table.columnName\')" show-overflow-tooltip prop="name" align="center"/> <el-table-column :label="$t(\'eip.table.operation\')" width="180" align="center"> <template slot-scope="{ row }"> <el-checkbox v-model="row.fixed" @change="fixedStatusChange()"> {{ $t(\'eip.table.fixed\') }} </el-checkbox> </template> </el-table-column> </el-table> <div style="text-align: right; margin-top: 20px"> <el-button @click="restoreDefault">{{ $t(\'eip.common.default\') }}</el-button> <el-button @click="onColumnSettingCancel">{{ $t(\'eip.common.cancel\') }}</el-button> <el-button type="primary" @click="onColumnSettingComfirm">{{ $t(\'eip.common.confirm\') }}</el-button> </div> </el-dialog> <el-button type="text" icon="icon-xianshishezhi-sel" size="mini" class="clear-all-btn" @click="showColumnSettingDialog(\'IssluggishDetail\')">{{$t(\'eip.table.columnSetting\')}}</el-button> </template> <template> <el-button type="text" icon="icon-xiazai" size="mini" class="clear-all-btn" style="margin-left: 18px; margin-right: 10px" @click="downloadAllFile(\'OrderChange.sub_IssluggishDetail\')">{{$t(\'ht.file.download\')}}</el-button> </template> <div class="import-export__wrap" style="display:flex" v-if="permission.table.IssluggishDetail.add"> <ht-sub-export-dialog v-if="!isView" data-columns="W3sibmFtZSI6IkVCRUxOIiwiZGVzYyI6IlNBUOiuouWNlee8luWPtyIsImN0cmxUeXBlIjoiZGlhbG9nIn0seyJuYW1lIjoiRUJFTFAiLCJkZXNjIjoi6KGM6aG555uu5Y+3IiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Ik1hdGVyaWFsQ29kZSIsImRlc2MiOiLnianmlpnnvJbnoIEiLCJjdHJsVHlwZSI6ImlucHV0In0seyJuYW1lIjoiTUFUTlIiLCJkZXNjIjoi5Yi26YCg5ZWG54mp5paZ57yW56CBIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Ik1hdGVyaWFsRGVzYyIsImRlc2MiOiLnianmlpnmj4/ov7AiLCJjdHJsVHlwZSI6ImlucHV0In0seyJuYW1lIjoiV2Vya3MiLCJkZXNjIjoi5bel5Y6CIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Ik9yZGVyc05vIiwiZGVzYyI6IuiuouWNleaVsOmHjyIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiRGVsaXZlcnlObyIsImRlc2MiOiLlt7LkuqTotKfmlbDph48iLCJjdHJsVHlwZSI6Im51bWJlciJ9LHsibmFtZSI6IkNhbmNlbE5vIiwiZGVzYyI6IuiuouWNleWPlua2iOaVsOmHjyIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiQ1NJbnZlbnRvcnkiLCJkZXNjIjoi5L6b5bqU5ZWG5bqT5a2YIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6IlByaWNlIiwiZGVzYyI6IuS7t+agvCIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiQ2FuY2VsQW1vdW50IiwiZGVzYyI6IuiuouWNleWPlua2iOmHkeminSIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiRGlzY291bnQiLCJkZXNjIjoi5oqY5omjIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6IlRpY2tldEN1cnJpZCIsImRlc2MiOiLluIHliKsiLCJjdHJsVHlwZSI6ImlucHV0In0seyJuYW1lIjoiUmVhc29uIiwiZGVzYyI6IuiuouWNleWPlua2iOWOn+WboCIsImN0cmxUeXBlIjoiaW5wdXQifSx7Im5hbWUiOiJUaWNrZXRNb25leSIsImRlc2MiOiLmipjmiaPlkI7ph5Hpop0iLCJjdHJsVHlwZSI6Im51bWJlciJ9LHsibmFtZSI6Ik5vdGUiLCJkZXNjIjoi5aSH5rOoIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Im1laW5zIiwiZGVzYyI6IuWfuuacrOiuoemHj+WNleS9jSIsImN0cmxUeXBlIjoiaW5wdXQifV0=" data-subname="data.OrderChange.sub_IssluggishDetail" data-subdesc="呆滞明细"></ht-sub-export-dialog> <ht-sub-import-dialog :rows="data.OrderChange.sub_IssluggishDetail" subDesc="呆滞明细" maxRow="0" v-if="!isView" data-columns="W3sibmFtZSI6IkVCRUxOIiwiZGVzYyI6IlNBUOiuouWNlee8luWPtyIsImN0cmxUeXBlIjoiZGlhbG9nIn0seyJuYW1lIjoiRUJFTFAiLCJkZXNjIjoi6KGM6aG555uu5Y+3IiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Ik1hdGVyaWFsQ29kZSIsImRlc2MiOiLnianmlpnnvJbnoIEiLCJjdHJsVHlwZSI6ImlucHV0In0seyJuYW1lIjoiTUFUTlIiLCJkZXNjIjoi5Yi26YCg5ZWG54mp5paZ57yW56CBIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Ik1hdGVyaWFsRGVzYyIsImRlc2MiOiLnianmlpnmj4/ov7AiLCJjdHJsVHlwZSI6ImlucHV0In0seyJuYW1lIjoiV2Vya3MiLCJkZXNjIjoi5bel5Y6CIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Ik9yZGVyc05vIiwiZGVzYyI6IuiuouWNleaVsOmHjyIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiRGVsaXZlcnlObyIsImRlc2MiOiLlt7LkuqTotKfmlbDph48iLCJjdHJsVHlwZSI6Im51bWJlciJ9LHsibmFtZSI6IkNhbmNlbE5vIiwiZGVzYyI6IuiuouWNleWPlua2iOaVsOmHjyIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiQ1NJbnZlbnRvcnkiLCJkZXNjIjoi5L6b5bqU5ZWG5bqT5a2YIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6IlByaWNlIiwiZGVzYyI6IuS7t+agvCIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiQ2FuY2VsQW1vdW50IiwiZGVzYyI6IuiuouWNleWPlua2iOmHkeminSIsImN0cmxUeXBlIjoibnVtYmVyIn0seyJuYW1lIjoiRGlzY291bnQiLCJkZXNjIjoi5oqY5omjIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6IlRpY2tldEN1cnJpZCIsImRlc2MiOiLluIHliKsiLCJjdHJsVHlwZSI6ImlucHV0In0seyJuYW1lIjoiUmVhc29uIiwiZGVzYyI6IuiuouWNleWPlua2iOWOn+WboCIsImN0cmxUeXBlIjoiaW5wdXQifSx7Im5hbWUiOiJUaWNrZXRNb25leSIsImRlc2MiOiLmipjmiaPlkI7ph5Hpop0iLCJjdHJsVHlwZSI6Im51bWJlciJ9LHsibmFtZSI6Ik5vdGUiLCJkZXNjIjoi5aSH5rOoIiwiY3RybFR5cGUiOiJpbnB1dCJ9LHsibmFtZSI6Im1laW5zIiwiZGVzYyI6IuWfuuacrOiuoemHj+WNleS9jSIsImN0cmxUeXBlIjoiaW5wdXQifV0=" data-subname="data.OrderChange.sub_IssluggishDetail"> </ht-sub-import-dialog> </div> <template v-if="!isView && permission.table.IssluggishDetail.del && \'onetomany\'!=\'onetoone\'"> <el-button type="text" icon="icon-qingkong" size="mini" class="clear-all-btn" @click="clearAllMessageBox({subTablePath: \'OrderChange.sub_IssluggishDetail\'})"> {{$t(\'ht.common.clear\')}} </el-button> </template> </div> </div> </div> <div class="form-table_box"> <div class="xh_table" id="xh_tablegd_OrderChange.sub_IssluggishDetail"> <div class="xh_hdleft" :style="left_image" id="lefthk_OrderChange.sub_IssluggishDetail" @click="xhleft(\'OrderChange.sub_IssluggishDetail\')"></div> <el-table :data="data.OrderChange.sub_IssluggishDetail" :onload=\'initFill("OrderChange.sub_IssluggishDetail","{\\"name\\":\\"\\",\\"code\\":\\"\\",\\"id\\":\\"\\"}")\' key="OrderChange.sub_IssluggishDetail" :header-cell-style="handleCellStyle" :header-row-style="handleRowStyle(\'\')" border :row-class-name="({row, rowIndex}) => {return \'data-subname__data.OrderChange.sub_IssluggishDetail \' + \'row_readonly__\' + row.sub_row_readonly + \' data-index__\' + (getPageOffset(\'data.OrderChange.sub_IssluggishDetail\') + rowIndex)}" style="width: 100%"> <el-table-column type="index" align="center" key="tableIndex" width="60" :label="$t(\'ht.common.seq\')" :fixed="freezeInfo.IssluggishDetail.freezeSub"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#333333">序号</span> </template> </el-table-column> <el-table-column align="center" prop="EBELN" key="EBELN_0" label="SAP订单编号" :fixed="freezeInfo[\'IssluggishDetail\'].list[0].fixed" width="200" v-if="freezeInfo[\'IssluggishDetail\'].list[0].show && permission.fields.IssluggishDetail.EBELN!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.EBELN==\'b\'">*</span> <el-tooltip content="SAP订单编号" class="show-ellipsis" style="display:block"> <span style="color:#333333">SAP订单编号</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-custom-dialog v-model="item.EBELN" model-name="item.EBELN" i18n-message="data.OrderChange.sub_IssluggishDetail.EBELN" name="SAP订单编号" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[],"mappingConf":[{"from":"orderNumber","target":["OrderChange.sub_IssluggishDetail.EBELN"],"targetSub":["OrderChange.sub_IssluggishDetail.EBELN"]},{"from":"orderItemNumber","target":["OrderChange.sub_IssluggishDetail.EBELP"],"targetSub":["OrderChange.sub_IssluggishDetail.EBELP"]}],"custQueryJson":[],"alias":"SRMgysddcx","type":"custDialog"},"resultField":[{"field":"orderNumber","comment":"orderNumber","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"orderItemNumber","comment":"orderItemNumber","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"toElsAccount","comment":"toElsAccount","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"erpVendorNo","comment":"erpVendorNo","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"elsAccountName","comment":"elsAccountName","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"orderDate","comment":"orderDate","idKey":"0","AggFuncOp":"","columnType":"varchar"}],"valueBind":"orderNumber","labelBind":"orderNumber","allowInput":true}\' placeholder="" :permission="permission.fields.IssluggishDetail.EBELN" style="width: 100%" atter="item.EBELN" :subIndex="getPageOffset(\'data.OrderChange.sub_IssluggishDetail\') + $index" :style=\'{}\'> <span slot="labeldesc">SAP订单编号 sub IssluggishDetail </span> </ht-custom-dialog> </template> </el-table-column> <el-table-column align="center" prop="EBELP" key="EBELP_1" label="行项目号" :fixed="freezeInfo[\'IssluggishDetail\'].list[1].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[1].show && permission.fields.IssluggishDetail.EBELP!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.EBELP==\'b\'">*</span> <el-tooltip content="行项目号" class="show-ellipsis" style="display:block"> <span style="color:#333333">行项目号</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.EBELP" name="行项目号" model-name="data.OrderChange.sub_IssluggishDetail.EBELP" :permission="permission.fields.IssluggishDetail.EBELP"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="MaterialCode" key="MaterialCode_2" label="物料编码" :fixed="freezeInfo[\'IssluggishDetail\'].list[2].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[2].show && permission.fields.IssluggishDetail.MaterialCode!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.MaterialCode==\'b\'">*</span> <el-tooltip content="物料编码" class="show-ellipsis" style="display:block"> <span style="color:#333333">物料编码</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.MaterialCode" name="物料编码" model-name="data.OrderChange.sub_IssluggishDetail.MaterialCode" :permission="permission.fields.IssluggishDetail.MaterialCode"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="MATNR" key="MATNR_3" label="制造商物料编码" :fixed="freezeInfo[\'IssluggishDetail\'].list[3].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[3].show && permission.fields.IssluggishDetail.MATNR!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.MATNR==\'b\'">*</span> <el-tooltip content="制造商物料编码" class="show-ellipsis" style="display:block"> <span style="color:#333333">制造商物料编码</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.MATNR" name="制造商物料编码" model-name="data.OrderChange.sub_IssluggishDetail.MATNR" :permission="permission.fields.IssluggishDetail.MATNR"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="MaterialDesc" key="MaterialDesc_4" label="物料描述" :fixed="freezeInfo[\'IssluggishDetail\'].list[4].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[4].show && permission.fields.IssluggishDetail.MaterialDesc!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.MaterialDesc==\'b\'">*</span> <el-tooltip content="物料描述" class="show-ellipsis" style="display:block"> <span style="color:#333333">物料描述</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.MaterialDesc" name="物料描述" model-name="data.OrderChange.sub_IssluggishDetail.MaterialDesc" :permission="permission.fields.IssluggishDetail.MaterialDesc"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="Werks" key="Werks_5" label="工厂" :fixed="freezeInfo[\'IssluggishDetail\'].list[5].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[5].show && permission.fields.IssluggishDetail.Werks!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.Werks==\'b\'">*</span> <el-tooltip content="工厂" class="show-ellipsis" style="display:block"> <span style="color:#333333">工厂</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Werks" name="工厂" model-name="data.OrderChange.sub_IssluggishDetail.Werks" :permission="permission.fields.IssluggishDetail.Werks"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="OrdersNo" key="OrdersNo_6" label="订单数量" :fixed="freezeInfo[\'IssluggishDetail\'].list[6].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[6].show && permission.fields.IssluggishDetail.OrdersNo!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.OrdersNo==\'b\'">*</span> <el-tooltip content="订单数量" class="show-ellipsis" style="display:block"> <span style="color:#333333">订单数量</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.OrdersNo" name="订单数量" ctrlType="number" model-name="data.OrderChange.sub_IssluggishDetail.OrdersNo" type="number" company="" :permission="permission.fields.IssluggishDetail.OrdersNo" :min=-9999999999 :max=9999999999 :step=1 :precision=2> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="DeliveryNo" key="DeliveryNo_7" label="已交货数量" :fixed="freezeInfo[\'IssluggishDetail\'].list[7].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[7].show && permission.fields.IssluggishDetail.DeliveryNo!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.DeliveryNo==\'b\'">*</span> <el-tooltip content="已交货数量" class="show-ellipsis" style="display:block"> <span style="color:#333333">已交货数量</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.DeliveryNo" name="已交货数量" ctrlType="number" model-name="data.OrderChange.sub_IssluggishDetail.DeliveryNo" type="number" company="" :permission="permission.fields.IssluggishDetail.DeliveryNo" :min=-9999999999 :max=9999999999 :step=1 :precision=2> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="CancelNo" key="CancelNo_8" label="订单取消数量" :fixed="freezeInfo[\'IssluggishDetail\'].list[8].fixed" width="200" v-if="freezeInfo[\'IssluggishDetail\'].list[8].show && permission.fields.IssluggishDetail.CancelNo!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.CancelNo==\'b\'">*</span> <el-tooltip content="订单取消数量" class="show-ellipsis" style="display:block"> <span style="color:#333333">订单取消数量</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.CancelNo" name="订单取消数量" ctrlType="number" model-name="data.OrderChange.sub_IssluggishDetail.CancelNo" type="number" company="" :permission="permission.fields.IssluggishDetail.CancelNo" :min=0 :max=9999999999 :step=1 :precision=0> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="CSInventory" key="CSInventory_9" label="供应商库存" :fixed="freezeInfo[\'IssluggishDetail\'].list[9].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[9].show && permission.fields.IssluggishDetail.CSInventory!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.CSInventory==\'b\'">*</span> <el-tooltip content="供应商库存" class="show-ellipsis" style="display:block"> <span style="color:#333333">供应商库存</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.CSInventory" name="供应商库存" model-name="data.OrderChange.sub_IssluggishDetail.CSInventory" :permission="permission.fields.IssluggishDetail.CSInventory" style="width: 100%;"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="Price" key="Price_10" label="价格" :fixed="freezeInfo[\'IssluggishDetail\'].list[10].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[10].show && permission.fields.IssluggishDetail.Price!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.Price==\'b\'">*</span> <el-tooltip content="价格" class="show-ellipsis" style="display:block"> <span style="color:#333333">价格</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Price" name="价格" ctrlType="number" model-name="data.OrderChange.sub_IssluggishDetail.Price" type="number" company="" :permission="permission.fields.IssluggishDetail.Price" :min=-9999999999 :max=9999999999 :step=1 :precision=2> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="CancelAmount" key="CancelAmount_11" label="订单取消金额" :fixed="freezeInfo[\'IssluggishDetail\'].list[11].fixed" width="200" v-if="freezeInfo[\'IssluggishDetail\'].list[11].show && permission.fields.IssluggishDetail.CancelAmount!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.CancelAmount==\'b\'">*</span> <el-tooltip content="订单取消金额" class="show-ellipsis" style="display:block"> <span style="color:#333333">订单取消金额</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.CancelAmount" name="订单取消金额" ctrlType="number" model-name="data.OrderChange.sub_IssluggishDetail.CancelAmount" type="number" company="" :permission="permission.fields.IssluggishDetail.CancelAmount" :min=-9999999999 :max=9999999999 :step=1 :precision=2 v-formula="{value:$Formulas.MIN(item.CancelNo,item.CSInventory)*item.Price,bindPath: \'data.OrderChange.sub_IssluggishDetail[\'+(getPageOffset(\'data.OrderChange.sub_IssluggishDetail\') + $index)+\'].CancelAmount\' }"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="Discount" key="Discount_12" label="折扣" :fixed="freezeInfo[\'IssluggishDetail\'].list[12].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[12].show && permission.fields.IssluggishDetail.Discount!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.Discount==\'b\'">*</span> <el-tooltip content="折扣" class="show-ellipsis" style="display:block"> <span style="color:#333333">折扣</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Discount" name="折扣" model-name="data.OrderChange.sub_IssluggishDetail.Discount" :permission="permission.fields.IssluggishDetail.Discount"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="TicketCurrid" key="TicketCurrid_13" label="币别" :fixed="freezeInfo[\'IssluggishDetail\'].list[13].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[13].show && permission.fields.IssluggishDetail.TicketCurrid!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.TicketCurrid==\'b\'">*</span> <el-tooltip content="币别" class="show-ellipsis" style="display:block"> <span style="color:#333333">币别</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.TicketCurrid" name="币别" model-name="data.OrderChange.sub_IssluggishDetail.TicketCurrid" :permission="permission.fields.IssluggishDetail.TicketCurrid"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="Reason" key="Reason_14" label="订单取消原因" :fixed="freezeInfo[\'IssluggishDetail\'].list[14].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[14].show && permission.fields.IssluggishDetail.Reason!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.Reason==\'b\'">*</span> <el-tooltip content="订单取消原因" class="show-ellipsis" style="display:block"> <span style="color:#333333">订单取消原因</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Reason" name="订单取消原因" model-name="data.OrderChange.sub_IssluggishDetail.Reason" :permission="permission.fields.IssluggishDetail.Reason"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="TicketMoney" key="TicketMoney_15" label="折扣后金额" :fixed="freezeInfo[\'IssluggishDetail\'].list[15].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[15].show && permission.fields.IssluggishDetail.TicketMoney!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.TicketMoney==\'b\'">*</span> <el-tooltip content="折扣后金额" class="show-ellipsis" style="display:block"> <span style="color:#333333">折扣后金额</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.TicketMoney" name="折扣后金额" ctrlType="number" model-name="data.OrderChange.sub_IssluggishDetail.TicketMoney" type="number" company="" :permission="permission.fields.IssluggishDetail.TicketMoney" :min=-9999999999 :max=9999999999 :step=1 :precision=2 v-formula="{value:$Formulas.MIN(item.CSInventory,item.CancelNo)*item.Price*item.Discount,bindPath: \'data.OrderChange.sub_IssluggishDetail[\'+(getPageOffset(\'data.OrderChange.sub_IssluggishDetail\') + $index)+\'].TicketMoney\' }" style="width: 100%;"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="Note" key="Note_16" label="备注" :fixed="freezeInfo[\'IssluggishDetail\'].list[16].fixed" min-width="80" v-if="freezeInfo[\'IssluggishDetail\'].list[16].show && permission.fields.IssluggishDetail.Note!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.IssluggishDetail.Note==\'b\'">*</span> <el-tooltip content="备注" class="show-ellipsis" style="display:block"> <span style="color:#333333">备注</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Note" name="备注" model-name="data.OrderChange.sub_IssluggishDetail.Note" :permission="permission.fields.IssluggishDetail.Note"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="meins" key="meins_17" label="基本计量单位" :fixed="freezeInfo[\'IssluggishDetail\'].list[17].fixed" min-width="80" class-name="hidden" width="1" v-if="freezeInfo[\'IssluggishDetail\'].list[17].show"> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.meins" name="基本计量单位" model-name="data.OrderChange.sub_IssluggishDetail.meins" :permission="permission.fields.IssluggishDetail.meins"> </ht-input> </template> </el-table-column> <el-table-column label="操作" key="tableOperate" width="160" align="center" class="trash printHide" v-if="permission.table.IssluggishDetail.del"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#333333">操作</span> </template> <template slot-scope="{row,row:item,$index}"> <el-button size="small" type="text" class="copy-btn" icon="icon-copy" v-if="!isView && permission.table.IssluggishDetail.add" :disabled="isShowAddButton(\'data.OrderChange.sub_IssluggishDetail\',0)" @click="copy(data.OrderChange.sub_IssluggishDetail,row,\'data.OrderChange.sub_IssluggishDetail\')">{{$t(\'ht.common.copy\')}}</el-button> <el-button size="small" class="delete-btn" type="text" icon="icon-application-delete" v-if="!isView && permission.table.IssluggishDetail.del && !row.sub_row_readonly" @click="deleteRow(\'OrderChange.sub_IssluggishDetail\',row)"> {{$t(\'ht.common.delete\')}}</el-button> </template> </el-table-column> </el-table> <div class="table-footer printHide" @click="transitionIndex = -1"> <el-button v-if="!isView && permission.table.IssluggishDetail.add" size="small" type="text" class="add-btn" icon="el-icon-circle-plus-outline" @click="addSubTab(\'data.OrderChange.sub_IssluggishDetail\')" :disabled="isShowAddButton(\'data.OrderChange.sub_IssluggishDetail\',0)">{{$t(\'ht.common.add\')}}</el-button> </div> <div class="xh_hd" :style="right_image" id="righthk_OrderChange.sub_IssluggishDetail" @click="xhright(\'OrderChange.sub_IssluggishDetail\')"></div> </div> </div> </div> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="12" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.Ratio" v-if="permission.fields.OrderChange.Ratio!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">承担比例汇总</span> </template> <ht-input v-model="data.OrderChange.Ratio" name="承担比例汇总" ctrlType="number" model-name="data.OrderChange.Ratio" type="number" company="" :permission="permission.fields.OrderChange.Ratio" :min=-9999999999 :max=9999999999 :step=1 :precision=2 v-formula="{value:$Formulas.SUMSUB({ data: data.OrderChange.sub_ExpenseDetail, path: \'Ratio\' }),bindPath: \'data.OrderChange.Ratio\' }" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="12" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.sum_TicketMoney_1" v-if="permission.fields.OrderChange.sum_TicketMoney_1!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">折扣金额汇总</span> </template> <ht-input v-model="data.OrderChange.sum_TicketMoney_1" name="折扣金额汇总" ctrlType="number" model-name="data.OrderChange.sum_TicketMoney_1" type="number" company="" :permission="permission.fields.OrderChange.sum_TicketMoney_1" :min=-9999999999 :max=9999999999 :step=1 :precision=2 v-formula="{value:$Formulas.SUMSUB({ data: data.OrderChange.sub_IssluggishDetail, path: \'TicketMoney\' }),bindPath: \'data.OrderChange.sum_TicketMoney_1\' }" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> <div v-if="!permission.table.ExpenseDetail.hidden" class="form-table__container"> <div sunBos="" class="form-table-header"> <div class="flex" style="justify-content: space-between;"> <span class="sub-table__title" style="color:#333333">费用明细</span> <div class="printHide table-header-btn__wrap" style="display:flex"> <template> <el-dialog :title="$t(\'eip.table.customColumns\')" :visible.sync="columnDialogVisiable" append-to-body width="650px"> <el-table v-if="currentFreeze" style="width: 100%" height="300" :data="freeze[currentFreeze][\'list\']"> <el-table-column :label="$t(\'eip.table.showHide\')" align="center"> <template slot-scope="{ row }"> <el-checkbox v-model="row.show"/> </template> </el-table-column> <el-table-column :label="$t(\'eip.table.columnName\')" show-overflow-tooltip prop="name" align="center"/> <el-table-column :label="$t(\'eip.table.operation\')" width="180" align="center"> <template slot-scope="{ row }"> <el-checkbox v-model="row.fixed" @change="fixedStatusChange()"> {{ $t(\'eip.table.fixed\') }} </el-checkbox> </template> </el-table-column> </el-table> <div style="text-align: right; margin-top: 20px"> <el-button @click="restoreDefault">{{ $t(\'eip.common.default\') }}</el-button> <el-button @click="onColumnSettingCancel">{{ $t(\'eip.common.cancel\') }}</el-button> <el-button type="primary" @click="onColumnSettingComfirm">{{ $t(\'eip.common.confirm\') }}</el-button> </div> </el-dialog> <el-button type="text" icon="icon-xianshishezhi-sel" size="mini" class="clear-all-btn" @click="showColumnSettingDialog(\'ExpenseDetail\')">{{$t(\'eip.table.columnSetting\')}}</el-button> </template> <template> <el-button type="text" icon="icon-xiazai" size="mini" class="clear-all-btn" style="margin-left: 18px; margin-right: 10px" @click="downloadAllFile(\'OrderChange.sub_ExpenseDetail\')">{{$t(\'ht.file.download\')}}</el-button> </template> <div class="import-export__wrap" style="display:flex" v-if="permission.table.ExpenseDetail.add"> <ht-sub-export-dialog v-if="!isView" data-columns="W3sibmFtZSI6IkNvc3RDZW50ZXJJZCIsImRlc2MiOiLotLnnlKjmjILpnaDmiJDmnKzkuK3lv4MiLCJjdHJsVHlwZSI6ImRpYWxvZyJ9LHsibmFtZSI6IlJhdGlvIiwiZGVzYyI6IuaJv+aLheavlOS+iyIsImN0cmxUeXBlIjoiaW5wdXQifSx7Im5hbWUiOiJBbW91bnQiLCJkZXNjIjoi6YeR6aKdIiwiY3RybFR5cGUiOiJudW1iZXIifSx7Im5hbWUiOiJPd25lcmlkIiwiZGVzYyI6Iui0ueeUqOmDqOmXqOaAu+ebkSIsImN0cmxUeXBlIjoic2VsZWN0b3IifSx7Im5hbWUiOiJjXzE2NzA5MjY1NjMwMDBfMzc5NzYiLCJkZXNjIjoi5a6e5pe25Y2V6KGMIiwiY3RybFR5cGUiOiJpbW1lZGlhdGUtc2luZ2xlIn0seyJuYW1lIjoiT3duZXIiLCJkZXNjIjoi6LS555So6YOo6Zeo5oC755uR57yW56CBIiwiY3RybFR5cGUiOiJpbnB1dCJ9XQ==" data-subname="data.OrderChange.sub_ExpenseDetail" data-subdesc="费用明细"></ht-sub-export-dialog> <ht-sub-import-dialog :rows="data.OrderChange.sub_ExpenseDetail" subDesc="费用明细" maxRow="0" v-if="!isView" data-columns="W3sibmFtZSI6IkNvc3RDZW50ZXJJZCIsImRlc2MiOiLotLnnlKjmjILpnaDmiJDmnKzkuK3lv4MiLCJjdHJsVHlwZSI6ImRpYWxvZyJ9LHsibmFtZSI6IlJhdGlvIiwiZGVzYyI6IuaJv+aLheavlOS+iyIsImN0cmxUeXBlIjoiaW5wdXQifSx7Im5hbWUiOiJBbW91bnQiLCJkZXNjIjoi6YeR6aKdIiwiY3RybFR5cGUiOiJudW1iZXIifSx7Im5hbWUiOiJPd25lcmlkIiwiZGVzYyI6Iui0ueeUqOmDqOmXqOaAu+ebkSIsImN0cmxUeXBlIjoic2VsZWN0b3IifSx7Im5hbWUiOiJjXzE2NzA5MjY1NjMwMDBfMzc5NzYiLCJkZXNjIjoi5a6e5pe25Y2V6KGMIiwiY3RybFR5cGUiOiJpbW1lZGlhdGUtc2luZ2xlIn0seyJuYW1lIjoiT3duZXIiLCJkZXNjIjoi6LS555So6YOo6Zeo5oC755uR57yW56CBIiwiY3RybFR5cGUiOiJpbnB1dCJ9XQ==" data-subname="data.OrderChange.sub_ExpenseDetail"> </ht-sub-import-dialog> </div> <template v-if="!isView && permission.table.ExpenseDetail.del && \'onetomany\'!=\'onetoone\'"> <el-button type="text" icon="icon-qingkong" size="mini" class="clear-all-btn" @click="clearAllMessageBox({subTablePath: \'OrderChange.sub_ExpenseDetail\'})"> {{$t(\'ht.common.clear\')}} </el-button> </template> </div> </div> </div> <div class="form-table_box"> <div class="xh_table" id="xh_tablegd_OrderChange.sub_ExpenseDetail"> <div class="xh_hdleft" :style="left_image" id="lefthk_OrderChange.sub_ExpenseDetail" @click="xhleft(\'OrderChange.sub_ExpenseDetail\')"></div> <el-table :data="data.OrderChange.sub_ExpenseDetail" :onload=\'initFill("OrderChange.sub_ExpenseDetail","{\\"name\\":\\"\\",\\"code\\":\\"\\",\\"id\\":\\"\\"}")\' key="OrderChange.sub_ExpenseDetail" :header-cell-style="handleCellStyle" :header-row-style="handleRowStyle(\'\')" border :row-class-name="({row, rowIndex}) => {return \'data-subname__data.OrderChange.sub_ExpenseDetail \' + \'row_readonly__\' + row.sub_row_readonly + \' data-index__\' + (getPageOffset(\'data.OrderChange.sub_ExpenseDetail\') + rowIndex)}" style="width: 100%"> <el-table-column type="index" align="center" key="tableIndex" width="60" :label="$t(\'ht.common.seq\')" :fixed="freezeInfo.ExpenseDetail.freezeSub"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#333333">序号</span> </template> </el-table-column> <el-table-column align="center" prop="CostCenterId" key="CostCenterId_0" label="费用挂靠成本中心" :fixed="freezeInfo[\'ExpenseDetail\'].list[0].fixed" min-width="80" v-if="freezeInfo[\'ExpenseDetail\'].list[0].show && permission.fields.ExpenseDetail.CostCenterId!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.ExpenseDetail.CostCenterId==\'b\'">*</span> <el-tooltip content="费用挂靠成本中心" class="show-ellipsis" style="display:block"> <span style="color:#333333">费用挂靠成本中心</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-custom-dialog v-model="item.CostCenterId" model-name="item.CostCenterId" i18n-message="data.OrderChange.sub_ExpenseDetail.CostCenterId" name="费用挂靠成本中心" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[{"field":"GONGSDM","comment":"公司代码","condition":"EQ","dbType":"varchar","defaultType":"3","defaultValue":"","controllerType":"1","bindType":1,"bind":"data.OrderChange.compid"}],"mappingConf":[{"from":"公司名称","target":["OrderChange.Comp"],"targetSub":["OrderChange.Comp"]},{"from":"公司代码","target":[""],"targetSub":[""]},{"from":"编码（成本中心）","target":["OrderChange.sub_ExpenseDetail.CostCenterId"],"targetSub":["OrderChange.sub_ExpenseDetail.CostCenterId"]}],"custQueryJson":[],"alias":"CostCentre","type":"custDialog"},"resultField":[{"field":"编码（成本中心）","comment":"编码（成本中心）","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"费用部门编码","comment":"费用部门编码","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"费用部门名称","comment":"费用部门名称","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"公司代码","comment":"公司代码","idKey":"0","AggFuncOp":"","columnType":"varchar"}],"allowInput":false,"valueBind":"","labelBind":""}\' placeholder="" :permission="permission.fields.ExpenseDetail.CostCenterId" style="width: 100%" atter="item.CostCenterId" :subIndex="getPageOffset(\'data.OrderChange.sub_ExpenseDetail\') + $index" :style=\'{}\'> <span slot="labeldesc">费用挂靠成本中心 sub ExpenseDetail </span> </ht-custom-dialog> </template> </el-table-column> <el-table-column align="center" prop="Ratio" key="Ratio_1" label="承担比例" :fixed="freezeInfo[\'ExpenseDetail\'].list[1].fixed" min-width="80" v-if="freezeInfo[\'ExpenseDetail\'].list[1].show && permission.fields.ExpenseDetail.Ratio!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.ExpenseDetail.Ratio==\'b\'">*</span> <el-tooltip content="承担比例" class="show-ellipsis" style="display:block"> <span style="color:#333333">承担比例</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Ratio" name="承担比例" model-name="data.OrderChange.sub_ExpenseDetail.Ratio" :permission="permission.fields.ExpenseDetail.Ratio" :validate="\'numeric\'"> <template slot="append">%</template> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="Amount" key="Amount_2" label="金额" :fixed="freezeInfo[\'ExpenseDetail\'].list[2].fixed" min-width="80" v-if="freezeInfo[\'ExpenseDetail\'].list[2].show && permission.fields.ExpenseDetail.Amount!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.ExpenseDetail.Amount==\'b\'">*</span> <el-tooltip content="金额" class="show-ellipsis" style="display:block"> <span style="color:#333333">金额</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Amount" name="金额" ctrlType="number" model-name="data.OrderChange.sub_ExpenseDetail.Amount" type="number" company="" :permission="permission.fields.ExpenseDetail.Amount" :min=-9999999999 :max=9999999999 :step=1 :precision=2 v-formula="{value:data.OrderChange.sum_TicketMoney_1*item.Ratio/100,bindPath: \'data.OrderChange.sub_ExpenseDetail[\'+(getPageOffset(\'data.OrderChange.sub_ExpenseDetail\') + $index)+\'].Amount\' }" style="width: 100%;"> </ht-input> </template> </el-table-column> <el-table-column align="center" prop="Ownerid" key="Ownerid_3" label="费用部门总监" :fixed="freezeInfo[\'ExpenseDetail\'].list[3].fixed" min-width="80" v-if="freezeInfo[\'ExpenseDetail\'].list[3].show && permission.fields.ExpenseDetail.Ownerid!=\'n\'"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#e55555" v-if="permission.fields.ExpenseDetail.Ownerid==\'b\'">*</span> <el-tooltip content="费用部门总监" class="show-ellipsis" style="display:block"> <span style="color:#333333">费用部门总监</span> </el-tooltip> </template> <template slot-scope="{row,row:item,$index}"> <ht-user-selector-input v-model="item.Ownerid" name="费用部门总监" appendToBody model-name="data.OrderChange.sub_ExpenseDetail.Ownerid" :permission="permission.fields.ExpenseDetail.Ownerid" :config="{\'account\':\'data.OrderChange.sub_ExpenseDetail.Owner\'}" style="width: 100%;"> </ht-user-selector-input> </template> </el-table-column> <el-table-column align="center" prop="c_1670926563000_37976" key="c_1670926563000_37976_4" label="实时单行" :fixed="freezeInfo[\'ExpenseDetail\'].list[4].fixed" min-width="80" class-name="hidden" width="1" v-if="freezeInfo[\'ExpenseDetail\'].list[4].show"> <template slot-scope="{row,row:item,$index}"> <ht-readonly-input type="text" name="实时单行" :permission="permission.fields.ExpenseDetail.c_1670926563000_37976" style="font-weight:normal;" :style=\'{}\' v-model="item.c_1670926563000_37976" v-formula="{value:$Formulas.SUM(row.TicketMoney)*row.Ratio,bindPath: \'data.OrderChange.sub_ExpenseDetail[\'+(getPageOffset(\'data.OrderChange.sub_ExpenseDetail\') + $index)+\'].c_1670926563000_37976\' }" style="width: 100%;"> </ht-readonly-input> </template> </el-table-column> <el-table-column align="center" prop="Owner" key="Owner_5" label="费用部门总监编码" :fixed="freezeInfo[\'ExpenseDetail\'].list[5].fixed" min-width="80" class-name="hidden" width="1" v-if="freezeInfo[\'ExpenseDetail\'].list[5].show"> <template slot-scope="{row,row:item,$index}"> <ht-input v-model="item.Owner" name="费用部门总监编码" model-name="data.OrderChange.sub_ExpenseDetail.Owner" :permission="permission.fields.ExpenseDetail.Owner" style="width: 100%;"> </ht-input> </template> </el-table-column> <el-table-column label="操作" key="tableOperate" width="160" align="center" class="trash printHide" v-if="permission.table.ExpenseDetail.del"> <template slot="header" slot-scope="{row,row:item,$index}"> <span style="color:#333333">操作</span> </template> <template slot-scope="{row,row:item,$index}"> <el-button size="small" type="text" class="copy-btn" icon="icon-copy" v-if="!isView && permission.table.ExpenseDetail.add" :disabled="isShowAddButton(\'data.OrderChange.sub_ExpenseDetail\',0)" @click="copy(data.OrderChange.sub_ExpenseDetail,row,\'data.OrderChange.sub_ExpenseDetail\')">{{$t(\'ht.common.copy\')}}</el-button> <el-button size="small" class="delete-btn" type="text" icon="icon-application-delete" v-if="!isView && permission.table.ExpenseDetail.del && !row.sub_row_readonly" @click="deleteRow(\'OrderChange.sub_ExpenseDetail\',row)"> {{$t(\'ht.common.delete\')}}</el-button> </template> </el-table-column> </el-table> <div class="table-footer printHide" @click="transitionIndex = -1"> <el-button v-if="!isView && permission.table.ExpenseDetail.add" size="small" type="text" class="add-btn" icon="el-icon-circle-plus-outline" @click="addSubTab(\'data.OrderChange.sub_ExpenseDetail\')" :disabled="isShowAddButton(\'data.OrderChange.sub_ExpenseDetail\',0)">{{$t(\'ht.common.add\')}}</el-button> </div> <div class="xh_hd" :style="right_image" id="righthk_OrderChange.sub_ExpenseDetail" @click="xhright(\'OrderChange.sub_ExpenseDetail\')"></div> </div> </div> </div> <el-row> <el-col :span="24"> <ht-divider content-position="left" color="#DCDFE6"> <template> <i>合同信息</i> </template> </ht-divider> </el-col> </el-row> <el-row :gutter="0" justify="space-between" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.ContractNo" v-if="permission.fields.OrderChange.ContractNo!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">合同号</span> </template> <ht-input v-model="data.OrderChange.ContractNo" name="合同号" model-name="data.OrderChange.ContractNo" :permission="permission.fields.OrderChange.ContractNo" v-formula="{value:\'LA07-202202278\',bindPath: \'data.OrderChange.ContractNo\' }" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.AccountPeriod" v-if="permission.fields.OrderChange.AccountPeriod!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">账期（天）</span> </template> <ht-input v-model="data.OrderChange.AccountPeriod" name="账期（天）" ctrlType="number" model-name="data.OrderChange.AccountPeriod" type="number" company="" :permission="permission.fields.OrderChange.AccountPeriod" :min=0 :max=99999 :step=1 :precision=0 style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="24" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Online_template" v-if="permission.fields.OrderChange.Online_template!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">在线模板</span> </template> <ht-custom-dialog v-model="data.OrderChange.Online_template" model-name="data.OrderChange.Online_template" name="在线模板" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[],"mappingConf":[{"from":"模版名称","target":[""],"targetSub":[""]},{"from":"模板ID","target":["OrderChange.Online_template"],"targetSub":["OrderChange.Online_template"]}],"custQueryJson":[],"alias":"dzqmbsj","type":"custDialog"},"resultField":[{"field":"id","comment":"模板ID","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"status","comment":"模版状态","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"template_type","comment":"模板类型","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"title","comment":"模版名称","idKey":"0","AggFuncOp":"","columnType":"varchar"}],"valueBind":"id","labelBind":"id","allowInput":false}\' placeholder="" :permission="permission.fields.OrderChange.Online_template" style="width: 100%" atter="data.OrderChange.Online_template" :style=\'{}\'> <span slot="labeldesc">在线模板 OrderChange </span> </ht-custom-dialog> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="4" style=""> <ht-button v-model="data.OrderChange.c_1678696895000_64848" model-name="data.OrderChange.c_1678696895000_64848" icon="" btn-name="在线编辑" :permission="permission.fields.OrderChange.c_1678696895000_64848" script="Ly8g5rWB56iLIEtleQp2YXIgd29ya2Zsb3dLZXkgPSAnT3JkZXJDaGFuZ2UnCgovLyDnlKjmqKHmnb/liJvlu7rlkIjlkIzmlofmoaMKdmFyIGNyZWF0ZUJ5VGVtcGxhdGVBbGlhcyA9ICd5bWJjamh0d2R2MicKLy8g5Yib5bu65ZCI5ZCM5Yir5ZCNCnZhciBjcmVhdGVCeUNhdGVnb3J5QWxpYXMgPSAnY2podF8yJwovLyDpooTnrb7nvbLliKvlkI0KdmFyIHJlc2lnbkFsaWFzID0gJ3lxc3ltdjInCgovLyDmlofmoaMgSUQKdmFyIGRvY3VtZW50SWQgPSBkYXRhLk9yZGVyQ2hhbmdlLmRvY3VtZW50SWQKdmFyIHNldERvY3VtZW50SWQgPSBmdW5jdGlvbih2YWwpIHsKICBkYXRhLk9yZGVyQ2hhbmdlLmRvY3VtZW50SWQgPSB2YWwKfQoKLy8g5ZCI5ZCM5paH5qGjIElECnZhciBjb250cmFjdElkID0gZGF0YS5PcmRlckNoYW5nZS5jb250cmFjdElkCnZhciBzZXRDb250cmFjdElkID0gZnVuY3Rpb24odmFsKSB7CiAgZGF0YS5PcmRlckNoYW5nZS5jb250cmFjdElkID0gdmFsCn0KCnZhciBwYXJhbXMgPSB7CiAgY2F0ZWdvcnlJZDogewogICAgbmFtZTogJ+eUteWtkOeUqOWNsOa1geeoiyBJRCcsCiAgICB2YWx1ZTogZGF0YS5PcmRlckNoYW5nZS5zaWduYXR1cmVfcHJvY2VzcwogIH0sCiAgdGVtcGxhdGVJZDogewogICAgbmFtZTogJ+eblueroOWQiOWQjOaooeeJiCcsCiAgICB2YWx1ZTogZGF0YS5PcmRlckNoYW5nZS5PbmxpbmVfdGVtcGxhdGUKICB9LAogIHN1YmplY3Q6IHsKICAgIG5hbWU6ICfmlofku7blkI3np7AnLAogICAgdmFsdWU6IGRhdGEuT3JkZXJDaGFuZ2UuVGl0bGUKICB9Cn0KCnZhciBkb1NlcnZpY2VSZXEgPSBmdW5jdGlvbihhbGlhcywgcmVxRGF0YSkgewogIHJldHVybiByZXEoCiAgICBjb250ZXh0LmdhdGV3YXlVcmwgKwogICAgICAnL2JwbS1wcm94eS9zZXJ2aWNlL2Nob3Jlb2dyYXBoeS92MS9leGVjdXRlP2FsaWFzPScgKwogICAgICBhbGlhcyArCiAgICAgICcmd29ya2Zsb3dLZXk9JyArCiAgICAgIHdvcmtmbG93S2V5LAogICAgcmVxRGF0YSwKICAgIHttZXRob2Q6ICdQT1NUJ30KICApLnRoZW4oZnVuY3Rpb24ocmVzKSB7CiAgICB2YXIgcmVzRGF0YSA9IHJlcy5kYXRhCiAgICBpZiAocmVzRGF0YSAmJiByZXNEYXRhLmRhdGEpIHsKICAgICAgdmFyIGQgPSByZXNEYXRhLmRhdGEKICAgICAgaWYgKHR5cGVvZiBkID09PSAnc3RyaW5nJykgewogICAgICAgIGQgPSBKU09OLnBhcnNlKGQpCiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgZC5jb2RlID09PSAnbnVtYmVyJyAmJiBkLmNvZGUgIT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZC5tZXNzYWdlKQogICAgICB9CgogICAgICByZXR1cm4gZAogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc0RhdGEubWVzc2FnZSkKICAgIH0KICB9KQp9Cgp2YXIgZGVmYXVsdE1lc3NhZ2UgPSAn55Sf5oiQ6aKE562+572y6ZO+5o6l5aSx6LSlJwoKdmFyIG9wZW5QcmVzaWduVXJsID0gZnVuY3Rpb24oY0lkKSB7CiAgZG9TZXJ2aWNlUmVxKHJlc2lnbkFsaWFzLCB7CiAgICBjb250cmFjdElkOiBjSWQsCiAgICBvcGVyYWJsZTogdHJ1ZQogIH0pCiAgICAudGhlbihmdW5jdGlvbihwcmVzaWduRGF0YSkgewogICAgICBpZiAocHJlc2lnbkRhdGEucHJlc2lnblVybCkgewogICAgICAgIHdpbmRvdy5vcGVuKHByZXNpZ25EYXRhLnByZXNpZ25VcmwsICdfYmxhbmsnKQogICAgICB9IGVsc2UgewogICAgICAgIE1lc3NhZ2Uud2FybmluZygn55Sf5oiQ6aKE562+572y6ZO+5o6l5aSx6LSlJykKICAgICAgfQogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbihlKSB7CiAgICAgIE1lc3NhZ2Uud2FybmluZyhlLm1lc3NhZ2UgfHwgZGVmYXVsdE1lc3NhZ2UpCiAgICB9KQp9CgppZiAoY29udHJhY3RJZCkgewogIG9wZW5QcmVzaWduVXJsKGNvbnRyYWN0SWQpCiAgcmV0dXJuCn0KCmZvciAodmFyIGtleSBvZiBPYmplY3Qua2V5cyhwYXJhbXMpKSB7CiAgdmFyIHZhbCA9IHBhcmFtc1trZXldLnZhbHVlCiAgaWYgKCF2YWwpIHsKICAgIE1lc3NhZ2Uud2FybmluZyhg6K+35YWI6L6T5YWl4oCcJHtwYXJhbXNba2V5XS5uYW1lfeKAneWPguaVsGApCiAgICByZXR1cm4KICB9Cn0KY29uc3QgZmlyc3RLZXkgPSBPYmplY3Qua2V5cyhkYXRhKVswXQpjb25zdCBmaXJzdERhdGEgPSBkYXRhW2ZpcnN0S2V5XQpjb25zdCByZXF1ZXN0UGFyYW1zID0ge30KZm9yKGNvbnN0IGtleSBpbiBmaXJzdERhdGEgKSB7CiAgaWYgKGtleSA9PT0gJ2luaXREYXRhJyApIHsKICAgIGJyZWFrCiAgfQogIGlmKGtleS5pbmRleE9mKCdzdWInKSA9PT0gMCl7CiAgICByZXF1ZXN0UGFyYW1zW2tleV0gPSBmaXJzdERhdGFba2V5XSA/IEpTT04uc3RyaW5naWZ5KGZpcnN0RGF0YVtrZXldKSA6ICcnCiAgfWVsc2UgewogICAgcmVxdWVzdFBhcmFtc1trZXldID0gZmlyc3REYXRhW2tleV0KICB9Cn0KCmNvbnNvbGUubG9nKCdycGFyYW1zID0nLCByZXF1ZXN0UGFyYW1zICkKdmFyIGRvY3VtZW50SWRQcm9taXNlID0gZG9jdW1lbnRJZAogID8gUHJvbWlzZS5yZXNvbHZlKHtkb2N1bWVudElkfSkKICA6IGRvU2VydmljZVJlcShjcmVhdGVCeVRlbXBsYXRlQWxpYXMsIHsKICAgICAgdGVtcGxhdGVJZDogcGFyYW1zLnRlbXBsYXRlSWQudmFsdWUsCiAgICAgIHBhcmFtczogcmVxdWVzdFBhcmFtcyAKICAgIH0pLnRoZW4oZnVuY3Rpb24oZG9jdW1lbnREYXRhKSB7CiAgICAgIHNldERvY3VtZW50SWQoZG9jdW1lbnREYXRhLmRvY3VtZW50SWQpCiAgICAgIHJldHVybiBkb2N1bWVudERhdGEKICAgIH0pCgpkb2N1bWVudElkUHJvbWlzZQogIC50aGVuKGZ1bmN0aW9uKGRvY3VtZW50RGF0YSkgewogICAgaWYgKGRvY3VtZW50RGF0YS5kb2N1bWVudElkKSB7CiAgICAgIC8vIOWIm+W7uuWQiOWQjAogICAgICBkb1NlcnZpY2VSZXEoY3JlYXRlQnlDYXRlZ29yeUFsaWFzLCB7CiAgICAgICAgc3ViamVjdDogcGFyYW1zLnN1YmplY3QudmFsdWUsCiAgICAgICAgY2F0ZWdvcnlJZDogcGFyYW1zLmNhdGVnb3J5SWQudmFsdWUsCiAgICAgICAgZG9jdW1lbnRzOiBkb2N1bWVudERhdGEuZG9jdW1lbnRJZCwKICAgICAgICBzZW5kOiBmYWxzZQogICAgICB9KS50aGVuKGZ1bmN0aW9uKGNvbnRyYWN0RGF0YSkgewogICAgICAgIGlmIChjb250cmFjdERhdGEuY29udHJhY3RJZCkgewogICAgICAgICAgc2V0Q29udHJhY3RJZChjb250cmFjdERhdGEuY29udHJhY3RJZCkKCiAgICAgICAgICBvcGVuUHJlc2lnblVybChjb250cmFjdERhdGEuY29udHJhY3RJZCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgTWVzc2FnZS53YXJuaW5nKCfnlJ/miJDlkIjlkIzlpLHotKUnKQogICAgICAgIH0KICAgICAgfSkKICAgIH0gZWxzZSB7CiAgICAgIE1lc3NhZ2Uud2FybmluZygn55Sf5oiQ5ZCI5ZCM5paH5qGj5aSx6LSlJykKICAgIH0KICB9KQogIC5jYXRjaChmdW5jdGlvbihlKSB7CiAgICBNZXNzYWdlLndhcm5pbmcoZS5tZXNzYWdlIHx8IGRlZmF1bHRNZXNzYWdlKQogIH0p"> </ht-button> </el-col> <el-col :span="4" style=""> <ht-button v-model="data.OrderChange.c_1678704222000_31574" model-name="data.OrderChange.c_1678704222000_31574" icon="" btn-name="合同浏览" :permission="permission.fields.OrderChange.c_1678704222000_31574" script="dmFyIHdvcmtmbG93S2V5ID0gJ09yZGVyQ2hhbmdlJwovLyDlkIjlkIzmtY/op4jpobXpnaIKdmFyIHZpZXdVcmxBbGlhcyA9ICdodGxseW12MicKLy8g5ZCI5ZCMIElECnZhciBjb250cmFjdElkID0gZGF0YS5PcmRlckNoYW5nZS5jb250cmFjdElkCgppZiAoIWNvbnRyYWN0SWQpIHsKICBNZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeWQiOWQjOaWh+ahoyBJRCcpCiAgcmV0dXJuCn0KCnJlcSgKICBjb250ZXh0LmdhdGV3YXlVcmwgKwogICAgJy9icG0tcHJveHkvc2VydmljZS9jaG9yZW9ncmFwaHkvdjEvZXhlY3V0ZT9hbGlhcz0nICsKICAgIHZpZXdVcmxBbGlhcyArCiAgICAnJndvcmtmbG93S2V5PScgKwogICAgd29ya2Zsb3dLZXksCiAgewogICAgY29udHJhY3RJZDogY29udHJhY3RJZAogIH0sCiAge21ldGhvZDogJ1BPU1QnfQopCiAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7CiAgICB2YXIgcmVzRGF0YSA9IHJlcy5kYXRhCiAgICBpZiAocmVzRGF0YSAmJiByZXNEYXRhLmRhdGEpIHsKICAgICAgdmFyIGRhdGEgPSByZXNEYXRhLmRhdGEKICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpCiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgZGF0YS5jb2RlID09PSAnbnVtYmVyJyAmJiBkYXRhLmNvZGUgIT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlKQogICAgICB9CgogICAgICB3aW5kb3cub3BlbihkYXRhLnZpZXdVcmwsICdfYmxhbmsnKQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc0RhdGEubWVzc2FnZSkKICAgIH0KICB9KQogIC5jYXRjaChmdW5jdGlvbihlKSB7CiAgICBNZXNzYWdlLndhcm5pbmcoZS5tZXNzYWdlIHx8ICfojrflj5blkIjlkIzmtY/op4jpk77mjqXlpLHotKUnKQogIH0pCg=="> </ht-button> </el-col> <el-col :span="4" style=""> <ht-button v-model="data.OrderChange.c_1678704599000_5810" model-name="data.OrderChange.c_1678704599000_5810" icon="" btn-name="合同下载" :permission="permission.fields.OrderChange.c_1678704599000_5810" script="dmFyIHdvcmtmbG93S2V5ID0gJ09yZGVyQ2hhbmdlJwovLyDlkIjlkIzmlofmoaNJRAp2YXIgY29udHJhY3RJZCA9IGRhdGEuT3JkZXJDaGFuZ2UuY29udHJhY3RJZAovLyDkuIvovb3mlofmoaMgYWxpYXMKdmFyIGRvd25sb2FkQWxpYXMgPSAneHpodCcKCmlmICghY29udHJhY3RJZCkgewogIE1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl5ZCI5ZCM5paH5qGjIElEJykKICByZXR1cm4KfQoKdmFyIGRlZmF1bHRGaWxlbmFtZSA9IGNvbnRyYWN0SWQgKyAnLnppcCcKCnJlcSgKICBjb250ZXh0LmdhdGV3YXlVcmwgKwogICAgJy9icG0tcHJveHkvc2VydmljZS9jaG9yZW9ncmFwaHkvdjEvZ2V0UmVxdWVzdD9hbGlhcz0nICsKICAgIGRvd25sb2FkQWxpYXMgKwogICAgJyZ3b3JrZmxvd0tleT0nICsKICAgIHdvcmtmbG93S2V5LAogIHsKICAgIGNvbnRyYWN0SWQ6IGNvbnRyYWN0SWQKICB9LAogIHttZXRob2Q6ICdQT1NUJ30KKQogIC50aGVuKGZ1bmN0aW9uKHJlcykgewogICAgdmFyIHJlc0RhdGEgPSByZXMuZGF0YQogICAgaWYgKHJlc0RhdGEgJiYgcmVzRGF0YS5kYXRhKSB7CiAgICAgIHZhciBkYXRhID0gcmVzRGF0YS5kYXRhCiAgICAgIHJlcShkYXRhLnVybCwgbnVsbCwgewogICAgICAgIG1ldGhvZDogZGF0YS5yZXF1ZXN0VHlwZSwKICAgICAgICBwYXJhbXM6IGRhdGEucXVlcnlEYXRhLAogICAgICAgIGhlYWRlcnM6IGRhdGEuaGVhZGVyTWFwLAogICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB2YXIgZWxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykKICAgICAgICB2YXIgZmlsZW5hbWUKICAgICAgICBpZiAoIXJlcy5oZWFkZXJzWydjb250ZW50LWRpc3Bvc2l0aW9uJ10pIHsKICAgICAgICAgIGZpbGVuYW1lID0gZGVmYXVsdEZpbGVuYW1lCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpbGVOYW1lID0KICAgICAgICAgICAgcmVzLmhlYWRlcnNbJ2NvbnRlbnQtZGlzcG9zaXRpb24nXS5zcGxpdCgnPScpWzFdIHx8IGRlZmF1bHRGaWxlbmFtZQogICAgICAgIH0KCiAgICAgICAgaWYgKCdkb3dubG9hZCcgaW4gZWxpbmspIHsKICAgICAgICAgIGVsaW5rLmRvd25sb2FkID0gZmlsZW5hbWUKICAgICAgICAgIGVsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScKICAgICAgICAgIGVsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHJlcy5kYXRhKQogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGluaykKICAgICAgICAgIGVsaW5rLmNsaWNrKCkKICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoZWxpbmsuaHJlZikgLy8g6YeK5pS+VVJMIOWvueixoQogICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGluaykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gSUUxMCvkuIvovb0KICAgICAgICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKHJlcy5kYXRhLCBmaWxlbmFtZSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IocmVzRGF0YS5tZXNzYWdlKQogICAgfQogIH0pCiAgLmNhdGNoKGZ1bmN0aW9uKGUpIHsKICAgIE1lc3NhZ2Uud2FybmluZyhlLm1lc3NhZ2UgfHwgJ+iOt+WPluWQiOWQjOS4i+i9vemTvuaOpeWksei0pScpCiAgfSkK"> </ht-button> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Seal" v-if="permission.fields.OrderChange.Seal!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">印章名称</span> </template> <ht-custom-dialog v-model="data.OrderChange.Seal" model-name="data.OrderChange.Seal" name="印章名称" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[],"mappingConf":[{"from":"印章名称","target":["OrderChange.Seal"],"targetSub":["OrderChange.Seal"]}],"custQueryJson":[],"alias":"yzxx","type":"custDialog"},"resultField":[{"field":"category","comment":"印章分类","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"id","comment":"印章ID","idKey":"0","AggFuncOp":"","columnType":"number"},{"field":"name","comment":"印章名称","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"owner","comment":"公司ID","idKey":"0","AggFuncOp":"","columnType":"number"},{"field":"spec","comment":"印章规格","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"status","comment":"印章状态","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"type","comment":"印章类型","idKey":"0","AggFuncOp":"","columnType":"varchar"}],"valueBind":"id","labelBind":"name","allowInput":false}\' placeholder="" :permission="permission.fields.OrderChange.Seal" style="width: 100%" atter="data.OrderChange.Seal" :style=\'{}\'> <span slot="labeldesc">印章名称 OrderChange </span> </ht-custom-dialog> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.SealAdmin" v-if="permission.fields.OrderChange.SealAdmin!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">印章管理员</span> </template> <ht-user-selector-input v-model="data.OrderChange.SealAdmin" name="印章管理员" appendToBody model-name="data.OrderChange.SealAdmin" :permission="permission.fields.OrderChange.SealAdmin" :config="{\'account\':\'data.OrderChange.sy|SealAdmin\'}" style="width: 100%;"> </ht-user-selector-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.signature_process" v-if="permission.fields.OrderChange.signature_process!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">电子签用印流程</span> </template> <ht-custom-dialog v-model="data.OrderChange.signature_process" model-name="data.OrderChange.signature_process" name="电子签用印流程" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[],"mappingConf":[{"from":"用印流程名称","target":[""],"targetSub":[""]},{"from":"用印流程ID","target":["OrderChange.signature_process"],"targetSub":["OrderChange.signature_process"]}],"custQueryJson":[],"alias":"dzqyylc","type":"custDialog"},"resultField":[{"field":"id","comment":"用印流程ID","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"name","comment":"用印流程名称","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"state","comment":"用印流程状态","idKey":"0","AggFuncOp":"","columnType":"number"}],"valueBind":"id","labelBind":"id","allowInput":false}\' placeholder="" :permission="permission.fields.OrderChange.signature_process" style="width: 100%" atter="data.OrderChange.signature_process" :style=\'{}\'> <span slot="labeldesc">电子签用印流程 OrderChange </span> </ht-custom-dialog> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.documentId" v-if="permission.fields.OrderChange.documentId!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">文档ID</span> </template> <ht-input v-model="data.OrderChange.documentId" name="文档ID" model-name="data.OrderChange.documentId" :permission="permission.fields.OrderChange.documentId" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.contractId" v-if="permission.fields.OrderChange.contractId!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">合同ID</span> </template> <ht-input v-model="data.OrderChange.contractId" name="合同ID" model-name="data.OrderChange.contractId" :permission="permission.fields.OrderChange.contractId" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="24" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Protocol" v-if="permission.fields.OrderChange.Protocol!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">协议文本</span> </template> <ht-file v-model="data.OrderChange.Protocol" name="协议文本" model-name="data.OrderChange.Protocol" :permission="permission.fields.OrderChange.Protocol" propConf=\'[{"name":"prop1"},{"name":"prop2"},{"name":"prop3"},{"name":"prop4"},{"name":"prop5"},{"name":"prop6"}]\' :limit="1" :allow-preview="true" :allow-download="false" :size="50" :multiple="true" :simplicity="true" :flow-data="extendProp"> </ht-file> </ht-form-item> <ht-form-item label-color="#333333" field-path="OrderChange.MyCompany" v-if="permission.fields.OrderChange.MyCompany!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">传音签署</span> </template> <ht-file v-model="data.OrderChange.MyCompany" name="传音签署" model-name="data.OrderChange.MyCompany" :permission="permission.fields.OrderChange.MyCompany" propConf=\'[{"name":"prop1"},{"name":"prop2"},{"name":"prop3"},{"name":"prop4"},{"name":"prop5"},{"name":"prop6"}]\' :limit="5" :allow-preview="true" :allow-download="false" :size="50" :multiple="true" :simplicity="true" :flow-data="extendProp"> </ht-file> </ht-form-item> <ht-form-item label-color="#333333" v-show="false" field-path="OrderChange.CSContract" v-if="permission.fields.OrderChange.CSContract!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">供应商签署</span> </template> <ht-file v-model="data.OrderChange.CSContract" name="供应商签署" model-name="data.OrderChange.CSContract" :permission="permission.fields.OrderChange.CSContract" propConf=\'[{"name":"prop1"},{"name":"prop2"},{"name":"prop3"},{"name":"prop4"},{"name":"prop5"},{"name":"prop6"}]\' :limit="5" :allow-preview="true" :allow-download="false" :size="50" :multiple="true" :simplicity="true" :flow-data="extendProp"> </ht-file> </ht-form-item> </el-col> </el-row> <el-row> <el-col :span="24"> <ht-divider content-position="left" color="#DCDFE6"> <template> <i>收款明细</i> </template> </ht-divider> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Currid" v-if="permission.fields.OrderChange.Currid!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">付款币别</span> </template> <ht-custom-dialog v-model="data.OrderChange.Currid" model-name="data.OrderChange.Currid" name="付款币别" :custdialog=\'{"name":"请选择","icon":"","custDialog":{"selectNum":1,"conditions":[],"mappingConf":[{"from":"币种编码","target":["OrderChange.Currid"],"targetSub":["OrderChange.Currid"]}],"custQueryJson":[],"alias":"CurrencyCode","type":"custDialog"},"resultField":[{"field":"币种编码","comment":"币种编码","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"币种名称","comment":"币种名称","idKey":"0","AggFuncOp":"","columnType":"varchar"},{"field":"兑人民币汇率","comment":"兑人民币汇率","idKey":"0","AggFuncOp":"","columnType":"number"},{"field":"兑美金汇率","comment":"兑美金汇率","idKey":"0","AggFuncOp":"","columnType":"number"}],"allowInput":false}\' placeholder="" :permission="permission.fields.OrderChange.Currid" style="width: 100%" atter="data.OrderChange.Currid" :style=\'{}\'> <span slot="labeldesc">付款币别 OrderChange </span> </ht-custom-dialog> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.ExchangeRate" v-if="permission.fields.OrderChange.ExchangeRate!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">汇率</span> </template> <ht-input v-model="data.OrderChange.ExchangeRate" name="汇率" model-name="data.OrderChange.ExchangeRate" :permission="permission.fields.OrderChange.ExchangeRate" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Bankowner" v-if="permission.fields.OrderChange.Bankowner!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">收款方持卡人</span> </template> <ht-input v-model="data.OrderChange.Bankowner" name="收款方持卡人" model-name="data.OrderChange.Bankowner" :permission="permission.fields.OrderChange.Bankowner" readonly style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Bankaccount" v-if="permission.fields.OrderChange.Bankaccount!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">银行账号</span> </template> <ht-input v-model="data.OrderChange.Bankaccount" name="银行账号" model-name="data.OrderChange.Bankaccount" :permission="permission.fields.OrderChange.Bankaccount" readonly style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Openingbank" v-if="permission.fields.OrderChange.Openingbank!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">开户行</span> </template> <ht-input v-model="data.OrderChange.Openingbank" name="开户行" model-name="data.OrderChange.Openingbank" :permission="permission.fields.OrderChange.Openingbank" readonly style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Bankname" v-if="permission.fields.OrderChange.Bankname!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">银行金融机构</span> </template> <ht-input v-model="data.OrderChange.Bankname" name="银行金融机构" model-name="data.OrderChange.Bankname" :permission="permission.fields.OrderChange.Bankname" readonly style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> <el-row :gutter="0" justify="start" align="top" type="flex"> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Ihhcode" v-if="permission.fields.OrderChange.Ihhcode!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">联行号</span> </template> <ht-input v-model="data.OrderChange.Ihhcode" name="联行号" model-name="data.OrderChange.Ihhcode" :permission="permission.fields.OrderChange.Ihhcode" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.country" v-if="permission.fields.OrderChange.country!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">国家地区</span> </template> <ht-input v-model="data.OrderChange.country" name="国家地区" model-name="data.OrderChange.country" :permission="permission.fields.OrderChange.country" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> <el-col :span="8" style=""> <ht-form-item label-color="#333333" field-path="OrderChange.Bankcity" v-if="permission.fields.OrderChange.Bankcity!=\'n\' && data.OrderChange "> <template slot="label"> <span style=" color:#333333 !important;color: !important;">城市</span> </template> <ht-input v-model="data.OrderChange.Bankcity" name="城市" model-name="data.OrderChange.Bankcity" :permission="permission.fields.OrderChange.Bankcity" style="width: 100%;"> </ht-input> </ht-form-item> </el-col> </el-row> </el-form>'
